#################################
# BASIC
#################################
mixed-port: 7890
redir-port: 7892
tproxy-port: 7893

allow-lan: true
bind-address: "*"
mode: rule
log-level: info
ipv6: false

profile:
  store-selected: true
  store-fake-ip: true

external-controller: 127.0.0.1:9090
secret: ""

unified-delay: true
tcp-concurrent: true
find-process-mode: strict

#################################
# SNIFFER
#################################
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080]
    TLS:
      ports: [443, 8443]
  force-domain:
    - "+.roblox.com"
    - "+.openai.com"

#################################
# DNS
#################################
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16

  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "+.roblox.com"
    - "+.openai.com"

  default-nameserver:
    - 1.1.1.1
    - 8.8.8.8

  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query

  proxy-server-nameserver:
    - https://1.1.1.1/dns-query

#################################
# PROXY PROVIDERS
# (–¢–û–õ–¨–ö–û –ó–î–ï–°–¨!)
#################################
proxy-providers:

  GH_DE:
    type: http
    format: auto
    url: https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/main/Countries/Germany.txt
    interval: 3600
    path: ./providers/gh_de.yaml
    health-check:
      enable: true
      interval: 300
      url: http://www.gstatic.com/generate_204

  GH_NL:
    type: http
    format: auto
    url: https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/main/Countries/Netherlands.txt
    interval: 3600
    path: ./providers/gh_nl.yaml
    health-check:
      enable: true
      interval: 300
      url: http://www.gstatic.com/generate_204

  GH_PL:
    type: http
    format: auto
    url: https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/main/Countries/Poland.txt
    interval: 3600
    path: ./providers/gh_pl.yaml
    health-check:
      enable: true
      interval: 300
      url: http://www.gstatic.com/generate_204

  CORE_VLESS:
    type: http
    format: auto
    url: https://raw.githubusercontent.com/Epodonios/v2ray-configs/main/Splitted-By-Protocol/vless.txt
    interval: 7200
    path: ./providers/core_vless.yaml
    health-check:
      enable: true
      interval: 300
      url: http://www.gstatic.com/generate_204

#################################
# PROXY GROUPS
#################################
proxy-groups:

  - name: üéÆ Roblox
    type: url-test
    use:
      - GH_DE
      - GH_NL
      - GH_PL
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 200

  - name: ü§ñ ChatGPT
    type: fallback
    use:
      - CORE_VLESS
    url: http://www.gstatic.com/generate_204
    interval: 300

  - name: üåç Internet
    type: url-test
    use:
      - GH_DE
      - GH_NL
      - GH_PL
      - CORE_VLESS
    url: http://www.gstatic.com/generate_204
    interval: 600
    tolerance: 300

  - name: üö¶ FINAL
    type: select
    proxies:
      - üéÆ Roblox
      - ü§ñ ChatGPT
      - üåç Internet
      - DIRECT

#################################
# RULES
#################################
rules:
  # Roblox
  - DOMAIN-SUFFIX,roblox.com,üéÆ Roblox
  - DOMAIN-SUFFIX,rbxcdn.com,üéÆ Roblox

  # ChatGPT / OpenAI
  - DOMAIN-SUFFIX,openai.com,ü§ñ ChatGPT
  - DOMAIN-SUFFIX,chatgpt.com,ü§ñ ChatGPT

  # Local traffic
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT

  # Default
  - MATCH,üö¶ FINAL
