#################################
# BASIC
#################################
port: 7890
socks-port: 7891
mixed-port: 7893
allow-lan: true
mode: rule
log-level: info
ipv6: false

external-controller: 127.0.0.1:9090

#################################
# DNS
#################################
dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16

  default-nameserver:
    - 1.1.1.1
    - 8.8.8.8

  nameserver:
    - https://dns.cloudflare.com/dns-query
    - https://dns.google/dns-query

#################################
# PROXY PROVIDERS
#################################
proxy-providers:

  BLACK:
    type: http
    url: https://raw.githubusercontent.com/igareck/vpn-configs-for-russia/refs/heads/main/BLACK_VLESS_RUS.txt
    interval: 3600
    path: ./providers/black.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  WHITE:
    type: http
    url: https://raw.githubusercontent.com/igareck/vpn-configs-for-russia/refs/heads/main/Vless-Reality-White-Lists-Rus-Mobile.txt
    interval: 3600
    path: ./providers/white.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  FINLAND:
    type: http
    url: https://raw.githubusercontent.com/igareck/vpn-configs-for-russia/refs/heads/main/FINLAND.txt
    interval: 3600
    path: ./providers/finland.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 600

#################################
# PROXY GROUPS â€” TEST
#################################
proxy-groups:

  # ðŸ‡©ðŸ‡ª Germany â€” Frankfurt (baseline)
  - name: "ðŸŽ® TEST-DE-FRA"
    type: url-test
    use:
      - BLACK
      - WHITE
    filter: "(Frankfurt|FRA)"
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 30
    lazy: false
    disable-udp: false

  # ðŸ‡µðŸ‡± Poland â€” Warsaw (short route)
  - name: "ðŸŽ® TEST-PL-WAW"
    type: url-test
    use:
      - BLACK
      - WHITE
    filter: "(Warsaw|WAW)"
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 30
    lazy: false
    disable-udp: false

  # ðŸ‡³ðŸ‡± Netherlands â€” Amsterdam (IX test)
  - name: "ðŸŽ® TEST-NL-AMS"
    type: url-test
    use:
      - BLACK
      - WHITE
    filter: "(Amsterdam|AMS)"
    url: http://www.gstatic.com/generate_204
    interval: 120
    tolerance: 40
    lazy: false
    disable-udp: false

  # ðŸ‡«ðŸ‡® Finland â€” Helsinki (near route)
  - name: "ðŸŽ® TEST-FI-HEL"
    type: url-test
    use:
      - FINLAND
    filter: "(Helsinki|HEL-0[1-9]|HEL-[1-9])"
    url: http://www.gstatic.com/generate_204
    interval: 180
    tolerance: 40
    lazy: false
    disable-udp: false

  # ðŸ§ª Shadowsocks only
  - name: "ðŸ§ª TEST-SS"
    type: url-test
    use:
      - BLACK
      - WHITE
    filter: "(SS|Shadowsocks)"
    url: http://www.gstatic.com/generate_204
    interval: 180
    tolerance: 50
    lazy: false

  # ðŸ§ª Hysteria / HY2 / HY3
  - name: "ðŸ§ª TEST-HY"
    type: url-test
    use:
      - BLACK
      - WHITE
    filter: "(Hysteria|HY2|HY3)"
    url: http://www.gstatic.com/generate_204
    interval: 180
    tolerance: 60
    lazy: false

  # ðŸŽ® MASTER TEST SELECTOR
  - name: "ðŸŽ® GAME-TEST"
    type: select
    proxies:
      - ðŸŽ® TEST-DE-FRA
      - ðŸŽ® TEST-PL-WAW
      - ðŸŽ® TEST-NL-AMS
      - ðŸŽ® TEST-FI-HEL
      - ðŸ§ª TEST-SS
      - ðŸ§ª TEST-HY

#################################
# RULES
#################################
rules:
  - DOMAIN-SUFFIX,roblox.com,ðŸŽ® GAME-TEST
  - DOMAIN-SUFFIX,rbxcdn.com,ðŸŽ® GAME-TEST

  - DOMAIN-SUFFIX,openai.com,ðŸŽ® GAME-TEST
  - DOMAIN-SUFFIX,chatgpt.com,ðŸŽ® GAME-TEST

  - GEOIP,RU,DIRECT
  - MATCH,ðŸŽ® GAME-TEST
